import{w as u}from"./C3bX-MBV.js";import{a as c}from"./Dsy1AHCi.js";function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l={exports:{}};(function(t,a){a=t.exports=function(){for(var e="",r,o=0;o<32;o++)r=a.random()*16|0,o>4&&o<21&&!(o%4)&&(e+="-"),e+=(o===12?4:o===16?r&3|8:r).toString(16);return e};var s=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;a.isUUID=function(e){return s.test(e)},a.random=function(){return Math.random()}})(l,l.exports);var g=l.exports;const p=f(g),S=()=>JSON.parse(localStorage.getItem("settings")||JSON.stringify({daily_reset_time:null,weekly_reset_day:null,weekly_reset_time:null})),y=u(S());y.subscribe(t=>{localStorage.setItem("settings",JSON.stringify(t))});const O=()=>JSON.parse(localStorage.getItem("tasks")||"[]"),n=u(O());n.subscribe(t=>{localStorage.setItem("tasks",JSON.stringify(t))});const _=(t,a=null)=>{const s=t.match(/^(.+?)\s*x\s*(\d+)$/i);let e=null;s&&(t=s[1].trim(),e=parseInt(s[2])),n.update(r=>{const o={id:p(),name:t.trim(),amount:e,original_amount:e,frequency:a,completed:!1,last_reset:c.local().set({second:0}).toISO()},i=[...r,o].sort((d,m)=>d.name.localeCompare(m.name));return localStorage.setItem("tasks",JSON.stringify(i)),i})},k=t=>{n.update(a=>{const s=a.filter(e=>e.id!==t);return localStorage.setItem("tasks",JSON.stringify(s)),s})},w=t=>{n.update(a=>{const s=a.map(e=>e.id===t?{...e,completed:!e.completed,last_reset:c.local().set({second:0}).toISO()}:e);return localStorage.setItem("tasks",JSON.stringify(s)),s})},J=(t,a)=>{n.update(s=>{const e=s.map(r=>{if(r.id===t){const o=r.amount===0;return{...r,amount:a,completed:o}}return r});return localStorage.setItem("tasks",JSON.stringify(e)),e})},T=(t,a)=>{n.update(s=>{const e=s.map(r=>r.id===t?{...r,name:a}:r);return localStorage.setItem("tasks",JSON.stringify(e)),e})};export{_ as a,w as b,J as c,k as d,y as s,n as t,T as u};
