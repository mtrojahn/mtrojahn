import{s as ne,b as ae,n as G,r as Q,d as X,o as re}from"../chunks/scheduler.WS4t4ko8.js";import{S as oe,i as ie,e as p,s as x,c as h,b as O,a as P,g as B,d as T,f as m,v as J,o as M,h as U,j as u,p as Z,n as Y,q as ue,l as ce,m as de,u as fe,r as _e,w as se}from"../chunks/index.C_KWJU3E.js";import{e as $}from"../chunks/each.U567mLn_.js";import{D as S,t as ee,a as pe,b as he,u as me,c as ye,d as ve,s as Te}from"../chunks/GamingTaskStore.BZrRBh6j.js";function te(e,l,t){const o=e.slice();return o[19]=l[t],o[20]=l,o[21]=t,o}function be(e){let l;return{c(){l=p("td")},l(t){l=h(t,"TD",{}),O(l).forEach(T)},m(t,o){U(t,l,o)},p:G,d(t){t&&T(l)}}}function ke(e){let l,t,o,i;function f(){e[13].call(t,e[20],e[21])}function N(){return e[14](e[19])}return{c(){l=p("td"),t=p("input"),this.h()},l(c){l=h(c,"TD",{class:!0});var _=O(l);t=h(_,"INPUT",{type:!0,class:!0}),_.forEach(T),this.h()},h(){m(t,"type","number"),m(t,"class","num svelte-1xtpjyf"),m(l,"class","text-end")},m(c,_){U(c,l,_),u(l,t),M(t,e[19].amount),o||(i=[Y(t,"input",f),Y(t,"blur",N)],o=!0)},p(c,_){e=c,_&4&&se(t.value)!==e[19].amount&&M(t,e[19].amount)},d(c){c&&T(l),o=!1,Q(i)}}}function le(e){let l,t,o,i,f,N,c,_,y,C,D,k=e[19].frequency+"",A,q,g,w,H="",I,L,j;function K(){return e[10](e[19])}function s(){e[11].call(_,e[20],e[21])}function r(){return e[12](e[19])}function R(n,a){return n[19].amount&&n[19].amount>0?ke:be}let E=R(e),v=E(e);function b(){return e[15](e[19])}return{c(){l=p("tr"),t=p("td"),o=p("input"),N=x(),c=p("td"),_=p("input"),y=x(),v.c(),C=x(),D=p("td"),A=ce(k),q=x(),g=p("td"),w=p("i"),w.innerHTML=H,I=x(),this.h()},l(n){l=h(n,"TR",{});var a=O(l);t=h(a,"TD",{});var d=O(t);o=h(d,"INPUT",{class:!0,type:!0,id:!0}),d.forEach(T),N=P(a),c=h(a,"TD",{});var W=O(c);_=h(W,"INPUT",{class:!0,type:!0}),W.forEach(T),y=P(a),v.l(a),C=P(a),D=h(a,"TD",{class:!0});var V=O(D);A=de(V,k),V.forEach(T),q=P(a),g=h(a,"TD",{class:!0});var F=O(g);w=h(F,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),B(w)!=="svelte-chcjmm"&&(w.innerHTML=H),F.forEach(T),I=P(a),a.forEach(T),this.h()},h(){m(o,"class","form-check-input"),m(o,"type","checkbox"),m(o,"id",i=e[19].id),o.checked=f=e[19].completed,m(_,"class","txt svelte-1xtpjyf"),m(_,"type","text"),m(D,"class","text-end"),m(w,"class","fa fa-trash ms-4"),m(w,"aria-hidden","true"),J(w,"cursor","pointer"),m(g,"class","text-end")},m(n,a){U(n,l,a),u(l,t),u(t,o),u(l,N),u(l,c),u(c,_),M(_,e[19].name),u(l,y),v.m(l,null),u(l,C),u(l,D),u(D,A),u(l,q),u(l,g),u(g,w),u(l,I),L||(j=[Y(o,"change",K),Y(_,"input",s),Y(_,"blur",r),Y(w,"click",b)],L=!0)},p(n,a){e=n,a&4&&i!==(i=e[19].id)&&m(o,"id",i),a&4&&f!==(f=e[19].completed)&&(o.checked=f),a&4&&_.value!==e[19].name&&M(_,e[19].name),E===(E=R(e))&&v?v.p(e,a):(v.d(1),v=E(e),v&&(v.c(),v.m(l,C))),a&4&&k!==(k=e[19].frequency+"")&&fe(A,k)},d(n){n&&T(l),v.d(),L=!1,Q(j)}}}function Ee(e){let l,t,o,i,f,N="Daily",c,_="Weekly",y,C="Never",D,k,A='<i class="fa fa-plus" aria-hidden="true"></i>',q,g,w="Tasks",H,I,L,j,K='<th scope="col" style="width: 100px;" class="svelte-1xtpjyf">Done</th> <th class="svelte-1xtpjyf">Task</th> <th scope="col" class="text-end svelte-1xtpjyf" style="width: 100px">Amount</th> <th scope="col" class="text-end svelte-1xtpjyf" style="width: 150px">Reset Frequency</th> <th scope="col" style="width: 100px" class="svelte-1xtpjyf"></th>',s,r,R,E,v=$(e[2]),b=[];for(let n=0;n<v.length;n+=1)b[n]=le(te(e,v,n));return{c(){l=p("div"),t=p("input"),o=x(),i=p("select"),f=p("option"),f.textContent=N,c=p("option"),c.textContent=_,y=p("option"),y.textContent=C,D=x(),k=p("button"),k.innerHTML=A,q=x(),g=p("h6"),g.textContent=w,H=x(),I=p("div"),L=p("table"),j=p("tr"),j.innerHTML=K,s=x(),r=p("tbody");for(let n=0;n<b.length;n+=1)b[n].c();this.h()},l(n){l=h(n,"DIV",{class:!0});var a=O(l);t=h(a,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),o=P(a),i=h(a,"SELECT",{class:!0,style:!0});var d=O(i);f=h(d,"OPTION",{"data-svelte-h":!0}),B(f)!=="svelte-1h1fffs"&&(f.textContent=N),c=h(d,"OPTION",{"data-svelte-h":!0}),B(c)!=="svelte-1glifvy"&&(c.textContent=_),y=h(d,"OPTION",{"data-svelte-h":!0}),B(y)!=="svelte-1gfh5ae"&&(y.textContent=C),d.forEach(T),D=P(a),k=h(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(k)!=="svelte-yltwyw"&&(k.innerHTML=A),a.forEach(T),q=P(n),g=h(n,"H6",{"data-svelte-h":!0}),B(g)!=="svelte-xgf3w0"&&(g.textContent=w),H=P(n),I=h(n,"DIV",{class:!0});var W=O(I);L=h(W,"TABLE",{class:!0});var V=O(L);j=h(V,"TR",{"data-svelte-h":!0}),B(j)!=="svelte-1c8mfgk"&&(j.innerHTML=K),s=P(V),r=h(V,"TBODY",{});var F=O(r);for(let z=0;z<b.length;z+=1)b[z].l(F);F.forEach(T),V.forEach(T),W.forEach(T),this.h()},h(){m(t,"type","text"),m(t,"class","form-control form-control-sm"),m(t,"placeholder","New Task"),J(t,"max-width","300px"),f.__value="DAILY",M(f,f.__value),c.__value="WEEKLY",M(c,c.__value),y.__value="NEVER",M(y,y.__value),m(i,"class","form-select form-select-sm ms-3"),J(i,"max-width","150px"),e[0]===void 0&&ae(()=>e[8].call(i)),m(k,"type","button"),m(k,"class","btn btn-primary btn-sm ms-3"),m(l,"class","d-flex flex-row justify-content-end"),m(L,"class","table table-striped"),m(I,"class","row mx-1 mt-4")},m(n,a){U(n,l,a),u(l,t),M(t,e[1]),u(l,o),u(l,i),u(i,f),u(i,c),u(i,y),Z(i,e[0],!0),u(l,D),u(l,k),U(n,q,a),U(n,g,a),U(n,H,a),U(n,I,a),u(I,L),u(L,j),u(L,s),u(L,r);for(let d=0;d<b.length;d+=1)b[d]&&b[d].m(r,null);R||(E=[Y(t,"input",e[6]),Y(t,"keyup",e[7]),Y(i,"change",e[8]),Y(k,"click",e[9])],R=!0)},p(n,[a]){if(a&2&&t.value!==n[1]&&M(t,n[1]),a&1&&Z(i,n[0]),a&4){v=$(n[2]);let d;for(d=0;d<v.length;d+=1){const W=te(n,v,d);b[d]?b[d].p(W,a):(b[d]=le(W),b[d].c(),b[d].m(r,null))}for(;d<b.length;d+=1)b[d].d(1);b.length=v.length}},i:G,o:G,d(n){n&&(T(l),T(q),T(g),T(H),T(I)),ue(b,n),R=!1,Q(E)}}}function ge(e,l,t){let o,i,f,N;X(e,ee,s=>t(4,f=s)),X(e,Te,s=>t(5,N=s));const c=s=>{const r=S.local(),R=i.daily_reset_time.split(":");let E=S.local().set({hour:R[0],minute:R[1],second:0});return E>r&&(E=E.minus({days:1})),S.fromISO(s.last_reset)<E&&s.completed},_=s=>{const r=S.local();if(i.weekly_reset_day!==S.local().weekday)return!1;const R=i.weekly_reset_time.split(":");let E=S.local().set({hour:R[0],minute:R[1],second:0});return E>r&&(E=E.minus({days:7})),S.fromISO(s.last_reset)<E&&s.completed};re(()=>{const s=f.map(r=>((r.frequency==="DAILY"&&c(r)||r.frequency==="WEEKLY"&&_(r))&&(r.completed=!1,r.last_reset=S.local().set({second:0}).toISO(),r.amount=r.original_amount),r));ee.set(s)});let y="DAILY",C="";const D=(s,r)=>{pe(s,r),t(0,y=r),t(1,C="")};function k(){C=this.value,t(1,C)}const A=s=>s.key==="Enter"&&D(C,y);function q(){y=_e(this),t(0,y)}const g=()=>D(C,y),w=s=>he(s.id);function H(s,r){s[r].name=this.value,t(2,o),t(4,f)}const I=s=>me(s.id,s.name);function L(s,r){s[r].amount=se(this.value),t(2,o),t(4,f)}const j=s=>ye(s.id,s.amount),K=s=>ve(s.id);return e.$$.update=()=>{e.$$.dirty&16&&t(2,o=f.filter(s=>["DAILY","WEEKLY"].includes(s.frequency)).sort((s,r)=>s.name.localeCompare(r.name)&&s.frequency.localeCompare(r.frequency)).concat(f.filter(s=>s.frequency==="NEVER"))),e.$$.dirty&32&&(i=N)},[y,C,o,D,f,N,k,A,q,g,w,H,I,L,j,K]}class Ie extends oe{constructor(l){super(),ie(this,l,ge,Ee,ne,{})}}export{Ie as component};
