import{s as ne,b as ae,n as G,r as Q,d as X,o as re}from"../chunks/scheduler.WS4t4ko8.js";import{S as oe,i as ie,e as h,s as Y,c as p,b as R,a as A,g as B,d as k,f as m,v as J,o as x,h as V,j as u,p as Z,n as H,q as ue,l as ce,m as de,u as _e,r as fe,w as se}from"../chunks/index.C_KWJU3E.js";import{e as $}from"../chunks/each.U567mLn_.js";import{D as U,t as ee,a as he,b as pe,u as me,c as ve,d as ye,s as ke}from"../chunks/GamingTaskStore.goNE0vWh.js";function te(e,l,t){const r=e.slice();return r[19]=l[t],r[20]=l,r[21]=t,r}function Te(e){let l;return{c(){l=h("td")},l(t){l=p(t,"TD",{}),R(l).forEach(k)},m(t,r){V(t,l,r)},p:G,d(t){t&&k(l)}}}function be(e){let l,t,r,i;function _(){e[13].call(t,e[20],e[21])}function I(){return e[14](e[19])}return{c(){l=h("td"),t=h("input"),this.h()},l(c){l=p(c,"TD",{class:!0});var f=R(l);t=p(f,"INPUT",{type:!0,class:!0}),f.forEach(k),this.h()},h(){m(t,"type","number"),m(t,"class","num svelte-11xrk3q"),m(l,"class","text-end")},m(c,f){V(c,l,f),u(l,t),x(t,e[19].amount),r||(i=[H(t,"input",_),H(t,"blur",I)],r=!0)},p(c,f){e=c,f&4&&se(t.value)!==e[19].amount&&x(t,e[19].amount)},d(c){c&&k(l),r=!1,Q(i)}}}function le(e){let l,t,r,i,_,I,c,f,v,C,D,b=e[19].frequency+"",M,P,g,w,W="",q,L,O;function K(){return e[10](e[19])}function s(){e[11].call(f,e[20],e[21])}function o(){return e[12](e[19])}function N(n,a){return n[19].amount&&n[19].amount>0?be:Te}let E=N(e),y=E(e);function T(){return e[15](e[19])}return{c(){l=h("tr"),t=h("td"),r=h("input"),I=Y(),c=h("td"),f=h("input"),v=Y(),y.c(),C=Y(),D=h("td"),M=ce(b),P=Y(),g=h("td"),w=h("i"),w.innerHTML=W,q=Y(),this.h()},l(n){l=p(n,"TR",{});var a=R(l);t=p(a,"TD",{});var d=R(t);r=p(d,"INPUT",{class:!0,type:!0,id:!0}),d.forEach(k),I=A(a),c=p(a,"TD",{});var S=R(c);f=p(S,"INPUT",{class:!0,type:!0}),S.forEach(k),v=A(a),y.l(a),C=A(a),D=p(a,"TD",{class:!0});var j=R(D);M=de(j,b),j.forEach(k),P=A(a),g=p(a,"TD",{class:!0});var F=R(g);w=p(F,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),B(w)!=="svelte-chcjmm"&&(w.innerHTML=W),F.forEach(k),q=A(a),a.forEach(k),this.h()},h(){m(r,"class","form-check-input"),m(r,"type","checkbox"),m(r,"id",i=e[19].id),r.checked=_=e[19].completed,m(f,"class","txt svelte-11xrk3q"),m(f,"type","text"),m(D,"class","text-end"),m(w,"class","fa fa-trash ms-4"),m(w,"aria-hidden","true"),J(w,"cursor","pointer"),m(g,"class","text-end")},m(n,a){V(n,l,a),u(l,t),u(t,r),u(l,I),u(l,c),u(c,f),x(f,e[19].name),u(l,v),y.m(l,null),u(l,C),u(l,D),u(D,M),u(l,P),u(l,g),u(g,w),u(l,q),L||(O=[H(r,"change",K),H(f,"input",s),H(f,"blur",o),H(w,"click",T)],L=!0)},p(n,a){e=n,a&4&&i!==(i=e[19].id)&&m(r,"id",i),a&4&&_!==(_=e[19].completed)&&(r.checked=_),a&4&&f.value!==e[19].name&&x(f,e[19].name),E===(E=N(e))&&y?y.p(e,a):(y.d(1),y=E(e),y&&(y.c(),y.m(l,C))),a&4&&b!==(b=e[19].frequency+"")&&_e(M,b)},d(n){n&&k(l),y.d(),L=!1,Q(O)}}}function Ee(e){let l,t,r,i,_,I="Daily",c,f="Weekly",v,C="Never",D,b,M='<i class="fa fa-plus" aria-hidden="true"></i>',P,g,w="Tasks",W,q,L,O,K='<th scope="col" style="width: 150px;" class="svelte-11xrk3q">Done</th> <th class="svelte-11xrk3q">Task</th> <th scope="col" class="text-end svelte-11xrk3q">Amount</th> <th scope="col" class="text-end svelte-11xrk3q">Reset Frequency</th> <th scope="col" style="width: 400px" class="svelte-11xrk3q"></th>',s,o,N,E,y=$(e[2]),T=[];for(let n=0;n<y.length;n+=1)T[n]=le(te(e,y,n));return{c(){l=h("div"),t=h("input"),r=Y(),i=h("select"),_=h("option"),_.textContent=I,c=h("option"),c.textContent=f,v=h("option"),v.textContent=C,D=Y(),b=h("button"),b.innerHTML=M,P=Y(),g=h("h6"),g.textContent=w,W=Y(),q=h("div"),L=h("table"),O=h("tr"),O.innerHTML=K,s=Y(),o=h("tbody");for(let n=0;n<T.length;n+=1)T[n].c();this.h()},l(n){l=p(n,"DIV",{class:!0});var a=R(l);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),r=A(a),i=p(a,"SELECT",{class:!0,style:!0});var d=R(i);_=p(d,"OPTION",{"data-svelte-h":!0}),B(_)!=="svelte-1h1fffs"&&(_.textContent=I),c=p(d,"OPTION",{"data-svelte-h":!0}),B(c)!=="svelte-1glifvy"&&(c.textContent=f),v=p(d,"OPTION",{"data-svelte-h":!0}),B(v)!=="svelte-1gfh5ae"&&(v.textContent=C),d.forEach(k),D=A(a),b=p(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(b)!=="svelte-yltwyw"&&(b.innerHTML=M),a.forEach(k),P=A(n),g=p(n,"H6",{"data-svelte-h":!0}),B(g)!=="svelte-xgf3w0"&&(g.textContent=w),W=A(n),q=p(n,"DIV",{class:!0});var S=R(q);L=p(S,"TABLE",{class:!0});var j=R(L);O=p(j,"TR",{"data-svelte-h":!0}),B(O)!=="svelte-9w7wrv"&&(O.innerHTML=K),s=A(j),o=p(j,"TBODY",{});var F=R(o);for(let z=0;z<T.length;z+=1)T[z].l(F);F.forEach(k),j.forEach(k),S.forEach(k),this.h()},h(){m(t,"type","text"),m(t,"class","form-control form-control-sm"),m(t,"placeholder","New Task"),J(t,"max-width","300px"),_.__value="DAILY",x(_,_.__value),c.__value="WEEKLY",x(c,c.__value),v.__value="NEVER",x(v,v.__value),m(i,"class","form-select form-select-sm ms-3"),J(i,"max-width","150px"),e[0]===void 0&&ae(()=>e[8].call(i)),m(b,"type","button"),m(b,"class","btn btn-primary btn-sm ms-3"),m(l,"class","d-flex flex-row justify-content-end"),m(L,"class","table table-striped"),m(q,"class","row mx-1 mt-4")},m(n,a){V(n,l,a),u(l,t),x(t,e[1]),u(l,r),u(l,i),u(i,_),u(i,c),u(i,v),Z(i,e[0],!0),u(l,D),u(l,b),V(n,P,a),V(n,g,a),V(n,W,a),V(n,q,a),u(q,L),u(L,O),u(L,s),u(L,o);for(let d=0;d<T.length;d+=1)T[d]&&T[d].m(o,null);N||(E=[H(t,"input",e[6]),H(t,"keyup",e[7]),H(i,"change",e[8]),H(b,"click",e[9])],N=!0)},p(n,[a]){if(a&2&&t.value!==n[1]&&x(t,n[1]),a&1&&Z(i,n[0]),a&4){y=$(n[2]);let d;for(d=0;d<y.length;d+=1){const S=te(n,y,d);T[d]?T[d].p(S,a):(T[d]=le(S),T[d].c(),T[d].m(o,null))}for(;d<T.length;d+=1)T[d].d(1);T.length=y.length}},i:G,o:G,d(n){n&&(k(l),k(P),k(g),k(W),k(q)),ue(T,n),N=!1,Q(E)}}}function ge(e,l,t){let r,i,_,I;X(e,ee,s=>t(4,_=s)),X(e,ke,s=>t(5,I=s));const c=s=>{const o=U.local(),N=i.daily_reset_time.split(":");let E=U.local().set({hour:N[0],minute:N[1],second:0});return E>o&&(E=E.minus({days:1})),U.fromISO(s.last_reset)<E&&s.completed},f=s=>{const o=U.local();if(i.weekly_reset_day!==U.local().weekday)return!1;const N=i.weekly_reset_time.split(":");let E=U.local().set({hour:N[0],minute:N[1],second:0});return E>o&&(E=E.minus({days:7})),U.fromISO(s.last_reset)<E&&s.completed};re(()=>{const s=_.map(o=>((o.frequency==="DAILY"&&c(o)||o.frequency==="WEEKLY"&&f(o))&&(o.completed=!1,o.last_reset=U.local().set({second:0}).toISO()),o));ee.set(s)});let v="DAILY",C="";const D=(s,o)=>{he(s,o),t(0,v=o),t(1,C="")};function b(){C=this.value,t(1,C)}const M=s=>s.key==="Enter"&&D(C,v);function P(){v=fe(this),t(0,v)}const g=()=>D(C,v),w=s=>pe(s.id);function W(s,o){s[o].name=this.value,t(2,r),t(4,_)}const q=s=>me(s.id,s.name);function L(s,o){s[o].amount=se(this.value),t(2,r),t(4,_)}const O=s=>ve(s.id,s.amount),K=s=>ye(s.id);return e.$$.update=()=>{e.$$.dirty&16&&t(2,r=_.filter(s=>["DAILY","WEEKLY"].includes(s.frequency)).sort((s,o)=>s.name.localeCompare(o.name)&&s.frequency.localeCompare(o.frequency)).concat(_.filter(s=>s.frequency==="NEVER"))),e.$$.dirty&32&&(i=I)},[v,C,r,D,_,I,b,M,P,g,w,W,q,L,O,K]}class qe extends oe{constructor(l){super(),ie(this,l,ge,Ee,ne,{})}}export{qe as component};
