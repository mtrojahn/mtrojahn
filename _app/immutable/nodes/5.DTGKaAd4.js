import{s as re,b as ie,n as z,r as J,d as X,o as ce}from"../chunks/scheduler.WS4t4ko8.js";import{S as ue,i as de,e as h,s as M,c as f,b as q,a as Y,g as B,d as v,f as y,v as G,o as K,h as U,j as c,p as Z,n as V,q as _e,l as $,m as ee,u as te,r as he,w as oe}from"../chunks/index.C_KWJU3E.js";import{e as le}from"../chunks/each.U567mLn_.js";import{D as x,t as se,a as fe,b as pe,u as me,d as ve,s as ye}from"../chunks/GamingTaskStore.tjMoSt1Y.js";function ne(t,l,s){const o=t.slice();return o[16]=l[s],o[17]=l,o[18]=s,o}function Te(t){let l;return{c(){l=h("td")},l(s){l=f(s,"TD",{}),q(l).forEach(v)},m(s,o){U(s,l,o)},p:z,d(s){s&&v(l)}}}function ke(t){let l,s,o,i;function _(){t[10].call(s,t[17],t[18])}function C(){return t[11](t[16])}return{c(){l=h("td"),s=h("input"),this.h()},l(u){l=f(u,"TD",{class:!0});var k=q(l);s=f(k,"INPUT",{type:!0,class:!0}),k.forEach(v),this.h()},h(){y(s,"type","number"),y(s,"class","num svelte-6thoqw"),y(l,"class","text-end")},m(u,k){U(u,l,k),c(l,s),K(s,t[16].amount),o||(i=[V(s,"input",_),V(s,"change",C)],o=!0)},p(u,k){t=u,k&4&&oe(s.value)!==t[16].amount&&K(s,t[16].amount)},d(u){u&&v(l),o=!1,J(i)}}}function ae(t){let l,s,o,i,_,C,u,k=t[16].name+"",p,D,I,T,A=t[16].frequency+"",N,g,R,b,L="",n,a,O;function E(){return t[9](t[16])}function P(r,e){return r[16].amount&&r[16].amount>0?ke:Te}let H=P(t),w=H(t);function W(){return t[12](t[16])}return{c(){l=h("tr"),s=h("td"),o=h("input"),C=M(),u=h("td"),p=$(k),D=M(),w.c(),I=M(),T=h("td"),N=$(A),g=M(),R=h("td"),b=h("i"),b.innerHTML=L,n=M(),this.h()},l(r){l=f(r,"TR",{});var e=q(l);s=f(e,"TD",{});var m=q(s);o=f(m,"INPUT",{class:!0,type:!0,id:!0}),m.forEach(v),C=Y(e),u=f(e,"TD",{});var d=q(u);p=ee(d,k),d.forEach(v),D=Y(e),w.l(e),I=Y(e),T=f(e,"TD",{class:!0});var S=q(T);N=ee(S,A),S.forEach(v),g=Y(e),R=f(e,"TD",{class:!0});var j=q(R);b=f(j,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),B(b)!=="svelte-chcjmm"&&(b.innerHTML=L),j.forEach(v),n=Y(e),e.forEach(v),this.h()},h(){y(o,"class","form-check-input"),y(o,"type","checkbox"),y(o,"id",i=t[16].id),o.checked=_=t[16].completed,y(T,"class","text-end"),y(b,"class","fa fa-trash ms-4"),y(b,"aria-hidden","true"),G(b,"cursor","pointer"),y(R,"class","text-end")},m(r,e){U(r,l,e),c(l,s),c(s,o),c(l,C),c(l,u),c(u,p),c(l,D),w.m(l,null),c(l,I),c(l,T),c(T,N),c(l,g),c(l,R),c(R,b),c(l,n),a||(O=[V(o,"change",E),V(b,"click",W)],a=!0)},p(r,e){t=r,e&4&&i!==(i=t[16].id)&&y(o,"id",i),e&4&&_!==(_=t[16].completed)&&(o.checked=_),e&4&&k!==(k=t[16].name+"")&&te(p,k),H===(H=P(t))&&w?w.p(t,e):(w.d(1),w=H(t),w&&(w.c(),w.m(l,I))),e&4&&A!==(A=t[16].frequency+"")&&te(N,A)},d(r){r&&v(l),w.d(),a=!1,J(O)}}}function be(t){let l,s,o,i,_,C="Daily",u,k="Weekly",p,D="Permanent",I,T,A='<i class="fa fa-plus" aria-hidden="true"></i>',N,g,R="Tasks",b,L,n,a,O='<th scope="col" style="width: 150px;" class="svelte-6thoqw">Done</th> <th class="svelte-6thoqw">Task</th> <th scope="col" class="text-end svelte-6thoqw">Amount</th> <th scope="col" class="text-end svelte-6thoqw">Frequency</th> <th scope="col" style="width: 400px" class="svelte-6thoqw"></th>',E,P,H,w,W=le(t[2]),r=[];for(let e=0;e<W.length;e+=1)r[e]=ae(ne(t,W,e));return{c(){l=h("div"),s=h("input"),o=M(),i=h("select"),_=h("option"),_.textContent=C,u=h("option"),u.textContent=k,p=h("option"),p.textContent=D,I=M(),T=h("button"),T.innerHTML=A,N=M(),g=h("h6"),g.textContent=R,b=M(),L=h("div"),n=h("table"),a=h("tr"),a.innerHTML=O,E=M(),P=h("tbody");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){l=f(e,"DIV",{class:!0});var m=q(l);s=f(m,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),o=Y(m),i=f(m,"SELECT",{class:!0,style:!0});var d=q(i);_=f(d,"OPTION",{"data-svelte-h":!0}),B(_)!=="svelte-1h1fffs"&&(_.textContent=C),u=f(d,"OPTION",{"data-svelte-h":!0}),B(u)!=="svelte-1glifvy"&&(u.textContent=k),p=f(d,"OPTION",{"data-svelte-h":!0}),B(p)!=="svelte-1dsr87i"&&(p.textContent=D),d.forEach(v),I=Y(m),T=f(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(T)!=="svelte-yltwyw"&&(T.innerHTML=A),m.forEach(v),N=Y(e),g=f(e,"H6",{"data-svelte-h":!0}),B(g)!=="svelte-xgf3w0"&&(g.textContent=R),b=Y(e),L=f(e,"DIV",{class:!0});var S=q(L);n=f(S,"TABLE",{class:!0});var j=q(n);a=f(j,"TR",{"data-svelte-h":!0}),B(a)!=="svelte-1bl8a2c"&&(a.innerHTML=O),E=Y(j),P=f(j,"TBODY",{});var Q=q(P);for(let F=0;F<r.length;F+=1)r[F].l(Q);Q.forEach(v),j.forEach(v),S.forEach(v),this.h()},h(){y(s,"type","text"),y(s,"class","form-control form-control-sm"),y(s,"placeholder","New Task"),G(s,"max-width","300px"),_.__value="DAILY",K(_,_.__value),u.__value="WEEKLY",K(u,u.__value),p.__value="PERMANENT",K(p,p.__value),y(i,"class","form-select form-select-sm ms-3"),G(i,"max-width","150px"),t[0]===void 0&&ie(()=>t[7].call(i)),y(T,"type","button"),y(T,"class","btn btn-primary btn-sm ms-3"),y(l,"class","d-flex flex-row justify-content-end"),y(n,"class","table table-striped"),y(L,"class","row mx-1 mt-4")},m(e,m){U(e,l,m),c(l,s),K(s,t[1]),c(l,o),c(l,i),c(i,_),c(i,u),c(i,p),Z(i,t[0],!0),c(l,I),c(l,T),U(e,N,m),U(e,g,m),U(e,b,m),U(e,L,m),c(L,n),c(n,a),c(n,E),c(n,P);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(P,null);H||(w=[V(s,"input",t[6]),V(i,"change",t[7]),V(T,"click",t[8])],H=!0)},p(e,[m]){if(m&2&&s.value!==e[1]&&K(s,e[1]),m&1&&Z(i,e[0]),m&4){W=le(e[2]);let d;for(d=0;d<W.length;d+=1){const S=ne(e,W,d);r[d]?r[d].p(S,m):(r[d]=ae(S),r[d].c(),r[d].m(P,null))}for(;d<r.length;d+=1)r[d].d(1);r.length=W.length}},i:z,o:z,d(e){e&&(v(l),v(N),v(g),v(b),v(L)),_e(r,e),H=!1,J(w)}}}function Ee(t,l,s){let o,i,_,C;X(t,se,n=>s(4,_=n)),X(t,ye,n=>s(5,C=n));const u=n=>{const a=x.local(),O=i.daily_reset_time.split(":");let E=x.local().set({hour:O[0],minute:O[1],second:0});return E>a&&(E=E.minus({days:1})),x.fromISO(n.last_reset)<E&&n.completed},k=n=>{const a=x.local();if(i.weekly_reset_day!==x.local().weekday)return!1;const O=i.weekly_reset_time.split(":");let E=x.local().set({hour:O[0],minute:O[1],second:0});return E>a&&(E=E.minus({days:7})),x.fromISO(n.last_reset)<E&&n.completed};ce(()=>{const n=_.map(a=>((a.frequency==="DAILY"&&u(a)||a.frequency==="WEEKLY"&&k(a))&&(a.completed=!1,a.last_reset=x.local().set({second:0}).toISO()),a));se.set(n)});let p="DAILY",D="";const I=(n,a)=>{fe(n,a),s(0,p=a),s(1,D="")};function T(){D=this.value,s(1,D)}function A(){p=he(this),s(0,p)}const N=()=>I(D,p),g=n=>pe(n.id);function R(n,a){n[a].amount=oe(this.value),s(2,o),s(4,_)}const b=n=>me(n.id,n.amount),L=n=>ve(n.id);return t.$$.update=()=>{t.$$.dirty&16&&s(2,o=_.filter(n=>["DAILY","WEEKLY"].includes(n.frequency)).sort((n,a)=>n.name.localeCompare(a.name)&&n.frequency.localeCompare(a.frequency)).concat(_.filter(n=>n.frequency==="PERMANENT"))),t.$$.dirty&32&&(i=C)},[p,D,o,I,_,C,T,A,N,g,R,b,L]}class Le extends ue{constructor(l){super(),de(this,l,Ee,be,re,{})}}export{Le as component};
