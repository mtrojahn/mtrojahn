import{s as ut,n as R,r as dt,d as tt,o as ft}from"../chunks/DrLZyavb.js";import{S as pt,i as mt,d as f,p as et,b as H,c as d,l as Q,e as j,v as st,f as b,j as D,h as L,w as lt,k as I,s as O,g as z,o as _t,u as M,m as w,n as T}from"../chunks/BUsGBGiN.js";import{e as nt}from"../chunks/e27mqMS8.js";import{D as ht,a as B}from"../chunks/Dsy1AHCi.js";import{c as vt,s as at,m as gt,l as bt,a as It}from"../chunks/3a0S4KYi.js";function ot(n){if(!n)return"0 min";const t=ht.fromISO(n),e=Math.floor(t.as("hours")),s=Math.floor(t.as("minutes")%60);return e>0&&s>0?`${e}h ${s}m`:e>0?`${e}h`:`${s}m`}function rt(n,t,e){const s=n.slice();return s[11]=t[e],s}function yt(n){let t,e,s;return{c(){t=I("p"),e=T("No entries found for "),s=T(n[2]),this.h()},l(l){t=b(l,"P",{class:!0});var r=D(t);e=w(r,"No entries found for "),s=w(r,n[2]),r.forEach(f),this.h()},h(){j(t,"class","text-muted")},m(l,r){H(l,t,r),d(t,e),d(t,s)},p(l,r){r&4&&M(s,l[2])},d(l){l&&f(t)}}}function kt(n){let t,e,s,l,r="Export to Excel (Clipboard)",v,i,p,h,a=nt(n[0]),c=[];for(let u=0;u<a.length;u+=1)c[u]=ct(rt(n,a,u));return{c(){t=I("div"),e=I("div"),s=I("div"),l=I("button"),l.textContent=r,v=O(),i=I("ul");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){t=b(u,"DIV",{class:!0});var y=D(t);e=b(y,"DIV",{class:!0});var o=D(e);s=b(o,"DIV",{});var E=D(s);l=b(E,"BUTTON",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-6yusy7"&&(l.textContent=r),E.forEach(f),o.forEach(f),y.forEach(f),v=L(u),i=b(u,"UL",{class:!0});var g=D(i);for(let m=0;m<c.length;m+=1)c[m].l(g);g.forEach(f),this.h()},h(){j(l,"class","btn btn-primary btn-sm"),j(e,"class","d-flex flex-row justify-content-end"),j(t,"class","row mb-2"),j(i,"class","list-group")},m(u,y){H(u,t,y),d(t,e),d(e,s),d(s,l),H(u,v,y),H(u,i,y);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(i,null);p||(h=Q(l,"click",n[8]),p=!0)},p(u,y){if(y&41){a=nt(u[0]);let o;for(o=0;o<a.length;o+=1){const E=rt(u,a,o);c[o]?c[o].p(E,y):(c[o]=ct(E),c[o].c(),c[o].m(i,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=a.length}},d(u){u&&(f(t),f(v),f(i)),_t(c,u),p=!1,h()}}}function jt(n){let t,e="Loading...";return{c(){t=I("p"),t.textContent=e},l(s){t=b(s,"P",{"data-svelte-h":!0}),z(t)!=="svelte-qdsr2u"&&(t.textContent=e)},m(s,l){H(s,t,l)},p:R,d(s){s&&f(t)}}}function it(n){let t,e=n[3](n[11].projectId)+"",s;return{c(){t=I("span"),s=T(e),this.h()},l(l){t=b(l,"SPAN",{class:!0});var r=D(t);s=w(r,e),r.forEach(f),this.h()},h(){j(t,"class","badge bg-secondary")},m(l,r){H(l,t,r),d(t,s)},p(l,r){r&1&&e!==(e=l[3](l[11].projectId)+"")&&M(s,e)},d(l){l&&f(t)}}}function Et(n){let t,e="No Mapping";return{c(){t=I("span"),t.textContent=e,this.h()},l(s){t=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-npqt22"&&(t.textContent=e),this.h()},h(){j(t,"class","badge bg-danger")},m(s,l){H(s,t,l)},p:R,d(s){s&&f(t)}}}function Ct(n){let t,e=n[5](n[3](n[11].projectId)).work_type+"",s,l,r=n[5](n[3](n[11].projectId)).task_activity+"",v;return{c(){t=I("span"),s=T(e),l=T(` -
								`),v=T(r),this.h()},l(i){t=b(i,"SPAN",{class:!0});var p=D(t);s=w(p,e),l=w(p,` -
								`),v=w(p,r),p.forEach(f),this.h()},h(){j(t,"class","badge bg-success")},m(i,p){H(i,t,p),d(t,s),d(t,l),d(t,v)},p(i,p){p&1&&e!==(e=i[5](i[3](i[11].projectId)).work_type+"")&&M(s,e),p&1&&r!==(r=i[5](i[3](i[11].projectId)).task_activity+"")&&M(v,r)},d(i){i&&f(t)}}}function ct(n){let t,e,s,l=(n[11].description||"(no description)")+"",r,v,i,p=n[3](n[11].projectId),h,a,c='<i class="fa fa-arrow-right" aria-hidden="true"></i>',u,y,o,E,g,m=B.fromISO(n[11].timeInterval.start,{setZone:"utc"}).toFormat("HH:mm")+"",N,A,V=(n[11].timeInterval.end?B.fromISO(n[11].timeInterval.end,{setZone:"utc"}).toFormat("HH:mm"):"running")+"",q,G,Z=ot(n[11].timeInterval.duration)+"",U,J,K,C=p&&it(n);function W(_,k){return k&1&&(o=null),o==null&&(o=!!_[5](_[3](_[11].projectId))),o?Ct:Et}let $=W(n,-1),P=$(n);return{c(){t=I("li"),e=I("div"),s=I("div"),r=T(l),v=O(),i=I("div"),C&&C.c(),h=O(),a=I("div"),a.innerHTML=c,u=O(),y=I("div"),P.c(),E=O(),g=I("small"),N=T(m),A=T(` -
					`),q=T(V),G=T(`
					(`),U=T(Z),J=T(")"),K=O(),this.h()},l(_){t=b(_,"LI",{class:!0});var k=D(t);e=b(k,"DIV",{class:!0});var S=D(e);s=b(S,"DIV",{class:!0});var X=D(s);r=w(X,l),X.forEach(f),v=L(S),i=b(S,"DIV",{class:!0});var Y=D(i);C&&C.l(Y),Y.forEach(f),h=L(S),a=b(S,"DIV",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1dc5jv5"&&(a.innerHTML=c),u=L(S),y=b(S,"DIV",{class:!0});var x=D(y);P.l(x),x.forEach(f),S.forEach(f),E=L(k),g=b(k,"SMALL",{class:!0});var F=D(g);N=w(F,m),A=w(F,` -
					`),q=w(F,V),G=w(F,`
					(`),U=w(F,Z),J=w(F,")"),F.forEach(f),K=L(k),k.forEach(f),this.h()},h(){j(s,"class","col-6"),j(i,"class","col-auto"),j(a,"class","col-auto"),j(y,"class","col-auto"),j(e,"class","row"),j(g,"class","text-muted"),j(t,"class","list-group-item")},m(_,k){H(_,t,k),d(t,e),d(e,s),d(s,r),d(e,v),d(e,i),C&&C.m(i,null),d(e,h),d(e,a),d(e,u),d(e,y),P.m(y,null),d(t,E),d(t,g),d(g,N),d(g,A),d(g,q),d(g,G),d(g,U),d(g,J),d(t,K)},p(_,k){k&1&&l!==(l=(_[11].description||"(no description)")+"")&&M(r,l),k&1&&(p=_[3](_[11].projectId)),p?C?C.p(_,k):(C=it(_),C.c(),C.m(i,null)):C&&(C.d(1),C=null),$===($=W(_,k))&&P?P.p(_,k):(P.d(1),P=$(_),P&&(P.c(),P.m(y,null))),k&1&&m!==(m=B.fromISO(_[11].timeInterval.start,{setZone:"utc"}).toFormat("HH:mm")+"")&&M(N,m),k&1&&V!==(V=(_[11].timeInterval.end?B.fromISO(_[11].timeInterval.end,{setZone:"utc"}).toFormat("HH:mm"):"running")+"")&&M(q,V),k&1&&Z!==(Z=ot(_[11].timeInterval.duration)+"")&&M(U,Z)},d(_){_&&f(t),C&&C.d(),P.d()}}}function Dt(n){let t,e,s,l,r,v;function i(a,c){return a[1]?jt:a[0].length>0?kt:yt}let p=i(n),h=p(n);return{c(){t=I("div"),e=I("input"),s=O(),h.c(),l=lt(),this.h()},l(a){t=b(a,"DIV",{class:!0,style:!0});var c=D(t);e=b(c,"INPUT",{type:!0,class:!0,style:!0}),c.forEach(f),s=L(a),h.l(a),l=lt(),this.h()},h(){j(e,"type","date"),j(e,"class","form-control form-control-sm"),st(e,"max-width","300px"),j(t,"class","d-flex flex-row justify-content-end"),st(t,"margin-bottom","1rem")},m(a,c){H(a,t,c),d(t,e),et(e,n[2]),H(a,s,c),h.m(a,c),H(a,l,c),r||(v=[Q(e,"input",n[7]),Q(e,"change",n[4])],r=!0)},p(a,[c]){c&4&&et(e,a[2]),p===(p=i(a))&&h?h.p(a,c):(h.d(1),h=p(a),h&&(h.c(),h.m(l.parentNode,l)))},i:R,o:R,d(a){a&&(f(t),f(s),f(l)),h.d(a),r=!1,dt(v)}}}function wt(n){const t=document.createElement("div");t.textContent=n,t.style.position="fixed",t.style.top="10px",t.style.right="10px",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.padding="10px",t.style.borderRadius="5px",document.body.appendChild(t),setTimeout(()=>{t.style.transition="opacity 1s",t.style.opacity="0",setTimeout(()=>{document.body.removeChild(t)},1e3)},3e3)}function Tt(n,t,e){let s,l;tt(n,gt,o=>e(10,s=o)),tt(n,at,o=>e(2,l=o));let r=[],v=!1,i=[];function p(o){const E=i.find(g=>g.id===o);return E?E.name:""}async function h(){if(!l)return;e(1,v=!0);const[o,E]=await Promise.all([bt(l),It()]);e(0,r=o),i=E,e(1,v=!1)}function a(o){return s.find(g=>g.project_name===o)}function c(){let g=vt().sort((m,N)=>m.start-N.start).map(m=>({description:m.description,mapping:a(p(m.projectId)),start:m.start.toFormat("HH:mm")})).map(m=>{const N=m.description?"'"+m.description.replace(/\t/g," ").replace(/\n/g," "):"",A=m.mapping?(m.mapping.work_type||"").replace(/\t/g," "):"",V=m.mapping?(m.mapping.task_activity||"").replace(/\t/g," "):"";return`${m.start}	${A}	${V}	${N}`}).join(`
`);navigator.clipboard.writeText(g),wt("Exported to clipboard!")}ft(()=>{h()});function u(){l=this.value,at.set(l)}return[r,v,l,p,h,a,c,u,()=>c()]}class Vt extends pt{constructor(t){super(),mt(this,t,Tt,Dt,ut,{})}}export{Vt as component};
