import{s as ne,n as G,r as Q,b as ae,d as X,o as re}from"../chunks/DrLZyavb.js";import{S as oe,i as ie,d as T,o as ue,p as M,q as Z,b as U,c as u,l as Y,e as m,v as J,f as p,j as O,h as x,g as B,k as h,s as P,u as ce,m as de,n as fe,r as _e,x as se}from"../chunks/BUsGBGiN.js";import{e as $}from"../chunks/e27mqMS8.js";import{a as S}from"../chunks/Dsy1AHCi.js";import{t as ee,a as pe,b as he,u as me,c as ye,d as ve,s as Te}from"../chunks/DBHkZbLa.js";function te(e,l,t){const o=e.slice();return o[19]=l[t],o[20]=l,o[21]=t,o}function be(e){let l;return{c(){l=h("td")},l(t){l=p(t,"TD",{}),O(l).forEach(T)},m(t,o){U(t,l,o)},p:G,d(t){t&&T(l)}}}function ke(e){let l,t,o,i;function f(){e[13].call(t,e[20],e[21])}function N(){return e[14](e[19])}return{c(){l=h("td"),t=h("input"),this.h()},l(c){l=p(c,"TD",{class:!0});var _=O(l);t=p(_,"INPUT",{type:!0,class:!0}),_.forEach(T),this.h()},h(){m(t,"type","number"),m(t,"class","num svelte-1xtpjyf"),m(l,"class","text-end")},m(c,_){U(c,l,_),u(l,t),M(t,e[19].amount),o||(i=[Y(t,"input",f),Y(t,"blur",N)],o=!0)},p(c,_){e=c,_&4&&se(t.value)!==e[19].amount&&M(t,e[19].amount)},d(c){c&&T(l),o=!1,Q(i)}}}function le(e){let l,t,o,i,f,N,c,_,y,w,L,k=e[19].frequency+"",A,q,g,C,H="",I,D,j;function K(){return e[10](e[19])}function s(){e[11].call(_,e[20],e[21])}function r(){return e[12](e[19])}function R(n,a){return n[19].amount&&n[19].amount>0?ke:be}let E=R(e),v=E(e);function b(){return e[15](e[19])}return{c(){l=h("tr"),t=h("td"),o=h("input"),N=P(),c=h("td"),_=h("input"),y=P(),v.c(),w=P(),L=h("td"),A=fe(k),q=P(),g=h("td"),C=h("i"),C.innerHTML=H,I=P(),this.h()},l(n){l=p(n,"TR",{});var a=O(l);t=p(a,"TD",{});var d=O(t);o=p(d,"INPUT",{class:!0,type:!0,id:!0}),d.forEach(T),N=x(a),c=p(a,"TD",{});var W=O(c);_=p(W,"INPUT",{class:!0,type:!0}),W.forEach(T),y=x(a),v.l(a),w=x(a),L=p(a,"TD",{class:!0});var V=O(L);A=de(V,k),V.forEach(T),q=x(a),g=p(a,"TD",{class:!0});var F=O(g);C=p(F,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),B(C)!=="svelte-chcjmm"&&(C.innerHTML=H),F.forEach(T),I=x(a),a.forEach(T),this.h()},h(){m(o,"class","form-check-input"),m(o,"type","checkbox"),m(o,"id",i=e[19].id),o.checked=f=e[19].completed,m(_,"class","txt svelte-1xtpjyf"),m(_,"type","text"),m(L,"class","text-end"),m(C,"class","fa fa-trash ms-4"),m(C,"aria-hidden","true"),J(C,"cursor","pointer"),m(g,"class","text-end")},m(n,a){U(n,l,a),u(l,t),u(t,o),u(l,N),u(l,c),u(c,_),M(_,e[19].name),u(l,y),v.m(l,null),u(l,w),u(l,L),u(L,A),u(l,q),u(l,g),u(g,C),u(l,I),D||(j=[Y(o,"change",K),Y(_,"input",s),Y(_,"blur",r),Y(C,"click",b)],D=!0)},p(n,a){e=n,a&4&&i!==(i=e[19].id)&&m(o,"id",i),a&4&&f!==(f=e[19].completed)&&(o.checked=f),a&4&&_.value!==e[19].name&&M(_,e[19].name),E===(E=R(e))&&v?v.p(e,a):(v.d(1),v=E(e),v&&(v.c(),v.m(l,w))),a&4&&k!==(k=e[19].frequency+"")&&ce(A,k)},d(n){n&&T(l),v.d(),D=!1,Q(j)}}}function Ee(e){let l,t,o,i,f,N="Daily",c,_="Weekly",y,w="Never",L,k,A='<i class="fa fa-plus" aria-hidden="true"></i>',q,g,C="Tasks",H,I,D,j,K='<th scope="col" style="width: 100px;" class="svelte-1xtpjyf">Done</th> <th class="svelte-1xtpjyf">Task</th> <th scope="col" class="text-end svelte-1xtpjyf" style="width: 100px">Amount</th> <th scope="col" class="text-end svelte-1xtpjyf" style="width: 150px">Reset Frequency</th> <th scope="col" style="width: 100px" class="svelte-1xtpjyf"></th>',s,r,R,E,v=$(e[2]),b=[];for(let n=0;n<v.length;n+=1)b[n]=le(te(e,v,n));return{c(){l=h("div"),t=h("input"),o=P(),i=h("select"),f=h("option"),f.textContent=N,c=h("option"),c.textContent=_,y=h("option"),y.textContent=w,L=P(),k=h("button"),k.innerHTML=A,q=P(),g=h("h6"),g.textContent=C,H=P(),I=h("div"),D=h("table"),j=h("tr"),j.innerHTML=K,s=P(),r=h("tbody");for(let n=0;n<b.length;n+=1)b[n].c();this.h()},l(n){l=p(n,"DIV",{class:!0});var a=O(l);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),o=x(a),i=p(a,"SELECT",{class:!0,style:!0});var d=O(i);f=p(d,"OPTION",{"data-svelte-h":!0}),B(f)!=="svelte-1h1fffs"&&(f.textContent=N),c=p(d,"OPTION",{"data-svelte-h":!0}),B(c)!=="svelte-1glifvy"&&(c.textContent=_),y=p(d,"OPTION",{"data-svelte-h":!0}),B(y)!=="svelte-1gfh5ae"&&(y.textContent=w),d.forEach(T),L=x(a),k=p(a,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(k)!=="svelte-yltwyw"&&(k.innerHTML=A),a.forEach(T),q=x(n),g=p(n,"H6",{"data-svelte-h":!0}),B(g)!=="svelte-xgf3w0"&&(g.textContent=C),H=x(n),I=p(n,"DIV",{class:!0});var W=O(I);D=p(W,"TABLE",{class:!0});var V=O(D);j=p(V,"TR",{"data-svelte-h":!0}),B(j)!=="svelte-1c8mfgk"&&(j.innerHTML=K),s=x(V),r=p(V,"TBODY",{});var F=O(r);for(let z=0;z<b.length;z+=1)b[z].l(F);F.forEach(T),V.forEach(T),W.forEach(T),this.h()},h(){m(t,"type","text"),m(t,"class","form-control form-control-sm"),m(t,"placeholder","New Task"),J(t,"max-width","300px"),f.__value="DAILY",M(f,f.__value),c.__value="WEEKLY",M(c,c.__value),y.__value="NEVER",M(y,y.__value),m(i,"class","form-select form-select-sm ms-3"),J(i,"max-width","150px"),e[0]===void 0&&ae(()=>e[8].call(i)),m(k,"type","button"),m(k,"class","btn btn-primary btn-sm ms-3"),m(l,"class","d-flex flex-row justify-content-end"),m(D,"class","table table-striped"),m(I,"class","row mx-1 mt-4")},m(n,a){U(n,l,a),u(l,t),M(t,e[1]),u(l,o),u(l,i),u(i,f),u(i,c),u(i,y),Z(i,e[0],!0),u(l,L),u(l,k),U(n,q,a),U(n,g,a),U(n,H,a),U(n,I,a),u(I,D),u(D,j),u(D,s),u(D,r);for(let d=0;d<b.length;d+=1)b[d]&&b[d].m(r,null);R||(E=[Y(t,"input",e[6]),Y(t,"keyup",e[7]),Y(i,"change",e[8]),Y(k,"click",e[9])],R=!0)},p(n,[a]){if(a&2&&t.value!==n[1]&&M(t,n[1]),a&1&&Z(i,n[0]),a&4){v=$(n[2]);let d;for(d=0;d<v.length;d+=1){const W=te(n,v,d);b[d]?b[d].p(W,a):(b[d]=le(W),b[d].c(),b[d].m(r,null))}for(;d<b.length;d+=1)b[d].d(1);b.length=v.length}},i:G,o:G,d(n){n&&(T(l),T(q),T(g),T(H),T(I)),ue(b,n),R=!1,Q(E)}}}function ge(e,l,t){let o,i,f,N;X(e,ee,s=>t(4,f=s)),X(e,Te,s=>t(5,N=s));const c=s=>{const r=S.local(),R=i.daily_reset_time.split(":");let E=S.local().set({hour:R[0],minute:R[1],second:0});return E>r&&(E=E.minus({days:1})),S.fromISO(s.last_reset)<E&&s.completed},_=s=>{const r=S.local();if(i.weekly_reset_day!==S.local().weekday)return!1;const R=i.weekly_reset_time.split(":");let E=S.local().set({hour:R[0],minute:R[1],second:0});return E>r&&(E=E.minus({days:7})),S.fromISO(s.last_reset)<E&&s.completed};re(()=>{const s=f.map(r=>((r.frequency==="DAILY"&&c(r)||r.frequency==="WEEKLY"&&_(r))&&(r.completed=!1,r.last_reset=S.local().set({second:0}).toISO(),r.amount=r.original_amount),r));ee.set(s)});let y="DAILY",w="";const L=(s,r)=>{pe(s,r),t(0,y=r),t(1,w="")};function k(){w=this.value,t(1,w)}const A=s=>s.key==="Enter"&&L(w,y);function q(){y=_e(this),t(0,y)}const g=()=>L(w,y),C=s=>he(s.id);function H(s,r){s[r].name=this.value,t(2,o),t(4,f)}const I=s=>me(s.id,s.name);function D(s,r){s[r].amount=se(this.value),t(2,o),t(4,f)}const j=s=>ye(s.id,s.amount),K=s=>ve(s.id);return e.$$.update=()=>{e.$$.dirty&16&&t(2,o=f.filter(s=>["DAILY","WEEKLY"].includes(s.frequency)).sort((s,r)=>s.name.localeCompare(r.name)&&s.frequency.localeCompare(r.frequency)).concat(f.filter(s=>s.frequency==="NEVER"))),e.$$.dirty&32&&(i=N)},[y,w,o,L,f,N,k,A,q,g,C,H,I,D,j,K]}class Ne extends oe{constructor(l){super(),ie(this,l,ge,Ee,ne,{})}}export{Ne as component};
