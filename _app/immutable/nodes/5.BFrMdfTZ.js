import{s as oe,f as re,n as J,r as ae,e as Q,o as ie}from"../chunks/scheduler.gf8ilvFp.js";import{S as ce,i as ue,g as h,s as M,h as p,j as O,c as P,y as Y,f as C,k,l as F,A as U,a as S,x as a,B as X,z as K,C as de,m as Z,n as $,o as ee,D as _e}from"../chunks/index.uKRM2Sym.js";import{e as te}from"../chunks/each.BoSOzGm4.js";import{D as H,t as le,a as fe,b as he,d as pe,s as me}from"../chunks/GamingTaskStore.5GXcYZpD.js";function se(t,s,n){const c=t.slice();return c[14]=s[n],c}function ne(t){let s,n,c,o,i,I,y,L=t[14].name+"",u,x,D,v=t[14].frequency+"",q,N,E,b,e="",d,m,g;function A(){return t[9](t[14])}function W(){return t[10](t[14])}return{c(){s=h("tr"),n=h("td"),c=h("input"),I=M(),y=h("td"),u=Z(L),x=M(),D=h("td"),q=Z(v),N=M(),E=h("td"),b=h("i"),b.innerHTML=e,d=M(),this.h()},l(w){s=p(w,"TR",{});var _=O(s);n=p(_,"TD",{});var j=O(n);c=p(j,"INPUT",{class:!0,type:!0,id:!0}),j.forEach(C),I=P(_),y=p(_,"TD",{});var R=O(y);u=$(R,L),R.forEach(C),x=P(_),D=p(_,"TD",{class:!0});var f=O(D);q=$(f,v),f.forEach(C),N=P(_),E=p(_,"TD",{class:!0});var l=O(E);b=p(l,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),Y(b)!=="svelte-chcjmm"&&(b.innerHTML=e),l.forEach(C),d=P(_),_.forEach(C),this.h()},h(){k(c,"class","form-check-input"),k(c,"type","checkbox"),k(c,"id",o=t[14].id),c.checked=i=t[14].completed,k(D,"class","text-end"),k(b,"class","fa fa-trash ms-4"),k(b,"aria-hidden","true"),F(b,"cursor","pointer"),k(E,"class","text-end")},m(w,_){S(w,s,_),a(s,n),a(n,c),a(s,I),a(s,y),a(y,u),a(s,x),a(s,D),a(D,q),a(s,N),a(s,E),a(E,b),a(s,d),m||(g=[K(c,"change",A),K(b,"click",W)],m=!0)},p(w,_){t=w,_&4&&o!==(o=t[14].id)&&k(c,"id",o),_&4&&i!==(i=t[14].completed)&&(c.checked=i),_&4&&L!==(L=t[14].name+"")&&ee(u,L),_&4&&v!==(v=t[14].frequency+"")&&ee(q,v)},d(w){w&&C(s),m=!1,ae(g)}}}function ye(t){let s,n,c,o,i,I="Daily",y,L="Weekly",u,x="Permanent",D,v,q='<i class="fa fa-plus" aria-hidden="true"></i>',N,E,b="Tasks",e,d,m,g,A='<th style="width: 150px;">Done</th> <th>Task</th> <th class="text-end">Frequency</th> <th style="width: 400px"></th>',W,w,_,j,R=te(t[2]),f=[];for(let l=0;l<R.length;l+=1)f[l]=ne(se(t,R,l));return{c(){s=h("div"),n=h("input"),c=M(),o=h("select"),i=h("option"),i.textContent=I,y=h("option"),y.textContent=L,u=h("option"),u.textContent=x,D=M(),v=h("button"),v.innerHTML=q,N=M(),E=h("h6"),E.textContent=b,e=M(),d=h("div"),m=h("table"),g=h("tr"),g.innerHTML=A,W=M(),w=h("tbody");for(let l=0;l<f.length;l+=1)f[l].c();this.h()},l(l){s=p(l,"DIV",{class:!0});var T=O(s);n=p(T,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),c=P(T),o=p(T,"SELECT",{class:!0,style:!0});var r=O(o);i=p(r,"OPTION",{"data-svelte-h":!0}),Y(i)!=="svelte-1h1fffs"&&(i.textContent=I),y=p(r,"OPTION",{"data-svelte-h":!0}),Y(y)!=="svelte-1glifvy"&&(y.textContent=L),u=p(r,"OPTION",{"data-svelte-h":!0}),Y(u)!=="svelte-1dsr87i"&&(u.textContent=x),r.forEach(C),D=P(T),v=p(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(v)!=="svelte-yltwyw"&&(v.innerHTML=q),T.forEach(C),N=P(l),E=p(l,"H6",{"data-svelte-h":!0}),Y(E)!=="svelte-xgf3w0"&&(E.textContent=b),e=P(l),d=p(l,"DIV",{class:!0});var B=O(d);m=p(B,"TABLE",{class:!0});var V=O(m);g=p(V,"TR",{"data-svelte-h":!0}),Y(g)!=="svelte-tjolv0"&&(g.innerHTML=A),W=P(V),w=p(V,"TBODY",{});var G=O(w);for(let z=0;z<f.length;z+=1)f[z].l(G);G.forEach(C),V.forEach(C),B.forEach(C),this.h()},h(){k(n,"type","text"),k(n,"class","form-control form-control-sm"),k(n,"placeholder","New Task"),F(n,"max-width","300px"),i.__value="DAILY",U(i,i.__value),y.__value="WEEKLY",U(y,y.__value),u.__value="PERMANENT",U(u,u.__value),k(o,"class","form-select form-select-sm ms-3"),F(o,"max-width","150px"),t[0]===void 0&&re(()=>t[7].call(o)),k(v,"type","button"),k(v,"class","btn btn-primary btn-sm ms-3"),k(s,"class","d-flex flex-row justify-content-end"),k(m,"class","table table-striped"),k(d,"class","row mx-1 mt-4")},m(l,T){S(l,s,T),a(s,n),U(n,t[1]),a(s,c),a(s,o),a(o,i),a(o,y),a(o,u),X(o,t[0],!0),a(s,D),a(s,v),S(l,N,T),S(l,E,T),S(l,e,T),S(l,d,T),a(d,m),a(m,g),a(m,W),a(m,w);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(w,null);_||(j=[K(n,"input",t[6]),K(o,"change",t[7]),K(v,"click",t[8])],_=!0)},p(l,[T]){if(T&2&&n.value!==l[1]&&U(n,l[1]),T&1&&X(o,l[0]),T&4){R=te(l[2]);let r;for(r=0;r<R.length;r+=1){const B=se(l,R,r);f[r]?f[r].p(B,T):(f[r]=ne(B),f[r].c(),f[r].m(w,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=R.length}},i:J,o:J,d(l){l&&(C(s),C(N),C(E),C(e),C(d)),de(f,l),_=!1,ae(j)}}}function ve(t,s,n){let c,o,i,I;Q(t,le,e=>n(4,i=e)),Q(t,me,e=>n(5,I=e));const y=e=>{const d=H.local(),m=o.daily_reset_time.split(":"),g=H.local().set({hour:m[0],minute:m[1],second:0}),A=H.fromISO(e.last_reset);return d>g&&A<g&&e.completed},L=e=>{const d=H.local();if(o.weekly_reset_day!==H.local().weekday)return!1;const m=o.weekly_reset_time.split(":"),g=H.local().set({hour:m[0],minute:m[1],second:0}),A=H.fromISO(e.last_reset);return d>g&&A<g&&e.completed};ie(()=>{i.map(e=>((e.frequency==="daily"&&y(e)||e.frequency==="weekly"&&L(e))&&(e.completed=!1,e.last_reset=H.local().set({second:0}).toISO()),e)),le.set(i)});let u="DAILY",x="";const D=(e,d)=>{fe(e,d),n(0,u="DAILY"),n(1,x="")};function v(){x=this.value,n(1,x)}function q(){u=_e(this),n(0,u)}const N=()=>D(x,u),E=e=>he(e.id),b=e=>pe(e.id);return t.$$.update=()=>{t.$$.dirty&16&&n(2,c=i.filter(e=>["DAILY","WEEKLY"].includes(e.frequency)).sort((e,d)=>e.name.localeCompare(d.name)&&e.frequency.localeCompare(d.frequency)).concat(i.filter(e=>e.frequency==="PERMANENT"))),t.$$.dirty&32&&(o=I)},[u,x,c,D,i,I,v,q,N,E,b]}class be extends ce{constructor(s){super(),ue(this,s,ve,ye,oe,{})}}export{be as component};
