import{s as oe,f as re,n as J,r as ae,e as Q,o as ie}from"../chunks/scheduler.gf8ilvFp.js";import{S as ce,i as ue,g as h,s as A,h as p,j as O,c as M,y as H,f as C,k as E,l as F,A as K,a as S,x as o,B as X,z as U,C as de,m as Z,n as $,o as ee,D as _e}from"../chunks/index.uKRM2Sym.js";import{e as te}from"../chunks/each.BoSOzGm4.js";import{D as Y,t as le,a as fe,b as he,d as pe,s as me}from"../chunks/GamingTaskStore.mVaTVFj9.js";function se(t,s,a){const c=t.slice();return c[14]=s[a],c}function ne(t){let s,a,c,r,u,I,v,L=t[14].name+"",d,x,w,y=t[14].frequency+"",q,N,k,b,e="",n,m,g;function P(){return t[9](t[14])}function W(){return t[10](t[14])}return{c(){s=h("tr"),a=h("td"),c=h("input"),I=A(),v=h("td"),d=Z(L),x=A(),w=h("td"),q=Z(y),N=A(),k=h("td"),b=h("i"),b.innerHTML=e,n=A(),this.h()},l(D){s=p(D,"TR",{});var _=O(s);a=p(_,"TD",{});var j=O(a);c=p(j,"INPUT",{class:!0,type:!0,id:!0}),j.forEach(C),I=M(_),v=p(_,"TD",{});var R=O(v);d=$(R,L),R.forEach(C),x=M(_),w=p(_,"TD",{class:!0});var f=O(w);q=$(f,y),f.forEach(C),N=M(_),k=p(_,"TD",{class:!0});var l=O(k);b=p(l,"I",{class:!0,"aria-hidden":!0,style:!0,"data-svelte-h":!0}),H(b)!=="svelte-chcjmm"&&(b.innerHTML=e),l.forEach(C),n=M(_),_.forEach(C),this.h()},h(){E(c,"class","form-check-input"),E(c,"type","checkbox"),E(c,"id",r=t[14].id),c.checked=u=t[14].completed,E(w,"class","text-end"),E(b,"class","fa fa-trash ms-4"),E(b,"aria-hidden","true"),F(b,"cursor","pointer"),E(k,"class","text-end")},m(D,_){S(D,s,_),o(s,a),o(a,c),o(s,I),o(s,v),o(v,d),o(s,x),o(s,w),o(w,q),o(s,N),o(s,k),o(k,b),o(s,n),m||(g=[U(c,"change",P),U(b,"click",W)],m=!0)},p(D,_){t=D,_&4&&r!==(r=t[14].id)&&E(c,"id",r),_&4&&u!==(u=t[14].completed)&&(c.checked=u),_&4&&L!==(L=t[14].name+"")&&ee(d,L),_&4&&y!==(y=t[14].frequency+"")&&ee(q,y)},d(D){D&&C(s),m=!1,ae(g)}}}function ve(t){let s,a,c,r,u,I="Daily",v,L="Weekly",d,x="Permanent",w,y,q='<i class="fa fa-plus" aria-hidden="true"></i>',N,k,b="Tasks",e,n,m,g,P='<th style="width: 150px;">Done</th> <th>Task</th> <th class="text-end">Frequency</th> <th style="width: 400px"></th>',W,D,_,j,R=te(t[2]),f=[];for(let l=0;l<R.length;l+=1)f[l]=ne(se(t,R,l));return{c(){s=h("div"),a=h("input"),c=A(),r=h("select"),u=h("option"),u.textContent=I,v=h("option"),v.textContent=L,d=h("option"),d.textContent=x,w=A(),y=h("button"),y.innerHTML=q,N=A(),k=h("h6"),k.textContent=b,e=A(),n=h("div"),m=h("table"),g=h("tr"),g.innerHTML=P,W=A(),D=h("tbody");for(let l=0;l<f.length;l+=1)f[l].c();this.h()},l(l){s=p(l,"DIV",{class:!0});var T=O(s);a=p(T,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),c=M(T),r=p(T,"SELECT",{class:!0,style:!0});var i=O(r);u=p(i,"OPTION",{"data-svelte-h":!0}),H(u)!=="svelte-1h1fffs"&&(u.textContent=I),v=p(i,"OPTION",{"data-svelte-h":!0}),H(v)!=="svelte-1glifvy"&&(v.textContent=L),d=p(i,"OPTION",{"data-svelte-h":!0}),H(d)!=="svelte-1dsr87i"&&(d.textContent=x),i.forEach(C),w=M(T),y=p(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(y)!=="svelte-yltwyw"&&(y.innerHTML=q),T.forEach(C),N=M(l),k=p(l,"H6",{"data-svelte-h":!0}),H(k)!=="svelte-xgf3w0"&&(k.textContent=b),e=M(l),n=p(l,"DIV",{class:!0});var B=O(n);m=p(B,"TABLE",{class:!0});var V=O(m);g=p(V,"TR",{"data-svelte-h":!0}),H(g)!=="svelte-tjolv0"&&(g.innerHTML=P),W=M(V),D=p(V,"TBODY",{});var G=O(D);for(let z=0;z<f.length;z+=1)f[z].l(G);G.forEach(C),V.forEach(C),B.forEach(C),this.h()},h(){E(a,"type","text"),E(a,"class","form-control form-control-sm"),E(a,"placeholder","New Task"),F(a,"max-width","300px"),u.__value="DAILY",K(u,u.__value),v.__value="WEEKLY",K(v,v.__value),d.__value="PERMANENT",K(d,d.__value),E(r,"class","form-select form-select-sm ms-3"),F(r,"max-width","150px"),t[0]===void 0&&re(()=>t[7].call(r)),E(y,"type","button"),E(y,"class","btn btn-primary btn-sm ms-3"),E(s,"class","d-flex flex-row justify-content-end"),E(m,"class","table table-striped"),E(n,"class","row mx-1 mt-4")},m(l,T){S(l,s,T),o(s,a),K(a,t[1]),o(s,c),o(s,r),o(r,u),o(r,v),o(r,d),X(r,t[0],!0),o(s,w),o(s,y),S(l,N,T),S(l,k,T),S(l,e,T),S(l,n,T),o(n,m),o(m,g),o(m,W),o(m,D);for(let i=0;i<f.length;i+=1)f[i]&&f[i].m(D,null);_||(j=[U(a,"input",t[6]),U(r,"change",t[7]),U(y,"click",t[8])],_=!0)},p(l,[T]){if(T&2&&a.value!==l[1]&&K(a,l[1]),T&1&&X(r,l[0]),T&4){R=te(l[2]);let i;for(i=0;i<R.length;i+=1){const B=se(l,R,i);f[i]?f[i].p(B,T):(f[i]=ne(B),f[i].c(),f[i].m(D,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=R.length}},i:J,o:J,d(l){l&&(C(s),C(N),C(k),C(e),C(n)),de(f,l),_=!1,ae(j)}}}function ye(t,s,a){let c,r,u,I;Q(t,le,e=>a(4,u=e)),Q(t,me,e=>a(5,I=e));const v=e=>{const n=Y.local(),m=r.daily_reset_time.split(":"),g=Y.local().set({hour:m[0],minute:m[1],second:0}),P=Y.fromISO(e.last_reset);return n>g&&P<g&&e.completed},L=e=>{const n=Y.local();if(r.weekly_reset_day!==Y.local().weekday)return!1;const m=r.weekly_reset_time.split(":"),g=Y.local().set({hour:m[0],minute:m[1],second:0}),P=Y.fromISO(e.last_reset);return n>g&&P<g&&e.completed};ie(()=>{const e=u.map(n=>((n.frequency==="DAILY"&&v(n)||n.frequency==="WEEKLY"&&L(n))&&(n.completed=!1,n.last_reset=Y.local().set({second:0}).toISO()),n));console.log(e),le.set(e)});let d="DAILY",x="";const w=(e,n)=>{fe(e,n),a(0,d="DAILY"),a(1,x="")};function y(){x=this.value,a(1,x)}function q(){d=_e(this),a(0,d)}const N=()=>w(x,d),k=e=>he(e.id),b=e=>pe(e.id);return t.$$.update=()=>{t.$$.dirty&16&&a(2,c=u.filter(e=>["DAILY","WEEKLY"].includes(e.frequency)).sort((e,n)=>e.name.localeCompare(n.name)&&e.frequency.localeCompare(n.frequency)).concat(u.filter(e=>e.frequency==="PERMANENT"))),t.$$.dirty&32&&(r=I)},[d,x,c,w,u,I,y,q,N,k,b]}class be extends ce{constructor(s){super(),ue(this,s,ye,ve,oe,{})}}export{be as component};
