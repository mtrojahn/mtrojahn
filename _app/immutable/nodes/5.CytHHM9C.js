import{s as ft,n as J,r as dt,d as et,o as pt}from"../chunks/DrLZyavb.js";import{S as mt,i as ht,d as f,p as lt,b as P,c,l as K,e as D,v as X,f as g,j as C,h as M,w as st,k,s as F,u as A,g as R,m as T,n as H,o as _t}from"../chunks/BUsGBGiN.js";import{e as nt}from"../chunks/e27mqMS8.js";import{D as vt,a as G}from"../chunks/Dsy1AHCi.js";import{c as bt,s as rt,m as gt,l as kt,a as It}from"../chunks/3a0S4KYi.js";function at(n){if(!n)return"0 min";const t=vt.fromISO(n),e=Math.floor(t.as("hours")),l=Math.floor(t.as("minutes")%60);return e>0&&l>0?`${e}h ${l}m`:e>0?`${e}h`:`${l}m`}function ot(n,t,e){const l=n.slice();return l[14]=t[e],l}function yt(n){let t,e,l;return{c(){t=k("p"),e=H("No entries found for "),l=H(n[4]),this.h()},l(s){t=g(s,"P",{class:!0});var r=C(t);e=T(r,"No entries found for "),l=T(r,n[4]),r.forEach(f),this.h()},h(){D(t,"class","text-muted")},m(s,r){P(s,t,r),c(t,e),c(t,l)},p(s,r){r&16&&A(l,s[4])},d(s){s&&f(t)}}}function Et(n){let t,e,l,s,r,_,i,u,I,v="Export to Excel (Clipboard)",h,a,m,O,N=nt(n[0]),p=[];for(let o=0;o<N.length;o+=1)p[o]=ct(ot(n,N,o));return{c(){t=k("div"),e=k("div"),l=k("div"),s=k("label"),r=k("input"),_=H(`
					Include Descriptions`),i=F(),u=k("div"),I=k("button"),I.textContent=v,h=F(),a=k("ul");for(let o=0;o<p.length;o+=1)p[o].c();this.h()},l(o){t=g(o,"DIV",{class:!0});var y=C(t);e=g(y,"DIV",{class:!0});var d=C(e);l=g(d,"DIV",{class:!0});var b=C(l);s=g(b,"LABEL",{});var V=C(s);r=g(V,"INPUT",{type:!0}),_=T(V,`
					Include Descriptions`),V.forEach(f),b.forEach(f),i=M(d),u=g(d,"DIV",{});var U=C(u);I=g(U,"BUTTON",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-6yusy7"&&(I.textContent=v),U.forEach(f),d.forEach(f),y.forEach(f),h=M(o),a=g(o,"UL",{class:!0});var L=C(a);for(let Z=0;Z<p.length;Z+=1)p[Z].l(L);L.forEach(f),this.h()},h(){D(r,"type","checkbox"),D(l,"class","me-2 pt-1"),D(I,"class","btn btn-primary btn-sm"),D(e,"class","d-flex flex-row justify-content-end"),D(t,"class","row mb-2"),D(a,"class","list-group")},m(o,y){P(o,t,y),c(t,e),c(e,l),c(l,s),c(s,r),r.checked=n[2],c(s,_),c(e,i),c(e,u),c(u,I),P(o,h,y),P(o,a,y);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(a,null);m||(O=[K(r,"change",n[10]),K(I,"click",n[11])],m=!0)},p(o,y){if(y&4&&(r.checked=o[2]),y&161){N=nt(o[0]);let d;for(d=0;d<N.length;d+=1){const b=ot(o,N,d);p[d]?p[d].p(b,y):(p[d]=ct(b),p[d].c(),p[d].m(a,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=N.length}},d(o){o&&(f(t),f(h),f(a)),_t(p,o),m=!1,dt(O)}}}function Dt(n){let t,e="Loading...";return{c(){t=k("p"),t.textContent=e},l(l){t=g(l,"P",{"data-svelte-h":!0}),R(t)!=="svelte-qdsr2u"&&(t.textContent=e)},m(l,s){P(l,t,s)},p:J,d(l){l&&f(t)}}}function it(n){let t,e=n[5](n[14].projectId)+"",l;return{c(){t=k("span"),l=H(e),this.h()},l(s){t=g(s,"SPAN",{class:!0});var r=C(t);l=T(r,e),r.forEach(f),this.h()},h(){D(t,"class","badge bg-secondary")},m(s,r){P(s,t,r),c(t,l)},p(s,r){r&1&&e!==(e=s[5](s[14].projectId)+"")&&A(l,e)},d(s){s&&f(t)}}}function jt(n){let t,e="No Mapping";return{c(){t=k("span"),t.textContent=e,this.h()},l(l){t=g(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-npqt22"&&(t.textContent=e),this.h()},h(){D(t,"class","badge bg-danger")},m(l,s){P(l,t,s)},p:J,d(l){l&&f(t)}}}function Ct(n){let t,e=n[7](n[5](n[14].projectId)).work_type+"",l,s,r=n[7](n[5](n[14].projectId)).task_activity+"",_;return{c(){t=k("span"),l=H(e),s=H(` -
								`),_=H(r),this.h()},l(i){t=g(i,"SPAN",{class:!0});var u=C(t);l=T(u,e),s=T(u,` -
								`),_=T(u,r),u.forEach(f),this.h()},h(){D(t,"class","badge bg-success")},m(i,u){P(i,t,u),c(t,l),c(t,s),c(t,_)},p(i,u){u&1&&e!==(e=i[7](i[5](i[14].projectId)).work_type+"")&&A(l,e),u&1&&r!==(r=i[7](i[5](i[14].projectId)).task_activity+"")&&A(_,r)},d(i){i&&f(t)}}}function ct(n){let t,e,l,s=(n[14].description||"(no description)")+"",r,_,i,u=n[5](n[14].projectId),I,v,h='<i class="fa fa-arrow-right" aria-hidden="true"></i>',a,m,O,N,p,o=G.fromISO(n[14].timeInterval.start,{setZone:"utc"}).toFormat("HH:mm")+"",y,d,b=(n[14].timeInterval.end?G.fromISO(n[14].timeInterval.end,{setZone:"utc"}).toFormat("HH:mm"):"running")+"",V,U,L=at(n[14].timeInterval.duration)+"",Z,Q,W,w=u&&it(n);function Y(E,j){return j&1&&(O=null),O==null&&(O=!!E[7](E[5](E[14].projectId))),O?Ct:jt}let z=Y(n,-1),S=z(n);return{c(){t=k("li"),e=k("div"),l=k("div"),r=H(s),_=F(),i=k("div"),w&&w.c(),I=F(),v=k("div"),v.innerHTML=h,a=F(),m=k("div"),S.c(),N=F(),p=k("small"),y=H(o),d=H(` -
					`),V=H(b),U=H(`
					(`),Z=H(L),Q=H(")"),W=F(),this.h()},l(E){t=g(E,"LI",{class:!0});var j=C(t);e=g(j,"DIV",{class:!0});var q=C(e);l=g(q,"DIV",{class:!0});var $=C(l);r=T($,s),$.forEach(f),_=M(q),i=g(q,"DIV",{class:!0});var x=C(i);w&&w.l(x),x.forEach(f),I=M(q),v=g(q,"DIV",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-1dc5jv5"&&(v.innerHTML=h),a=M(q),m=g(q,"DIV",{class:!0});var tt=C(m);S.l(tt),tt.forEach(f),q.forEach(f),N=M(j),p=g(j,"SMALL",{class:!0});var B=C(p);y=T(B,o),d=T(B,` -
					`),V=T(B,b),U=T(B,`
					(`),Z=T(B,L),Q=T(B,")"),B.forEach(f),W=M(j),j.forEach(f),this.h()},h(){D(l,"class","col-6"),D(i,"class","col-auto"),D(v,"class","col-auto"),D(m,"class","col-auto"),D(e,"class","row"),D(p,"class","text-muted"),D(t,"class","list-group-item")},m(E,j){P(E,t,j),c(t,e),c(e,l),c(l,r),c(e,_),c(e,i),w&&w.m(i,null),c(e,I),c(e,v),c(e,a),c(e,m),S.m(m,null),c(t,N),c(t,p),c(p,y),c(p,d),c(p,V),c(p,U),c(p,Z),c(p,Q),c(t,W)},p(E,j){j&1&&s!==(s=(E[14].description||"(no description)")+"")&&A(r,s),j&1&&(u=E[5](E[14].projectId)),u?w?w.p(E,j):(w=it(E),w.c(),w.m(i,null)):w&&(w.d(1),w=null),z===(z=Y(E,j))&&S?S.p(E,j):(S.d(1),S=z(E),S&&(S.c(),S.m(m,null))),j&1&&o!==(o=G.fromISO(E[14].timeInterval.start,{setZone:"utc"}).toFormat("HH:mm")+"")&&A(y,o),j&1&&b!==(b=(E[14].timeInterval.end?G.fromISO(E[14].timeInterval.end,{setZone:"utc"}).toFormat("HH:mm"):"running")+"")&&A(V,b),j&1&&L!==(L=at(E[14].timeInterval.duration)+"")&&A(Z,L)},d(E){E&&f(t),w&&w.d(),S.d()}}}function ut(n){let t,e,l="This is how the exported data looks like:",s,r,_;return{c(){t=k("div"),e=k("h6"),e.textContent=l,s=F(),r=k("pre"),_=H(n[3]),this.h()},l(i){t=g(i,"DIV",{class:!0});var u=C(t);e=g(u,"H6",{"data-svelte-h":!0}),R(e)!=="svelte-1xri93n"&&(e.textContent=l),s=M(u),r=g(u,"PRE",{style:!0});var I=C(r);_=T(I,n[3]),I.forEach(f),u.forEach(f),this.h()},h(){X(r,"white-space","pre-wrap"),D(t,"class","mt-4")},m(i,u){P(i,t,u),c(t,e),c(t,s),c(t,r),c(r,_)},p(i,u){u&8&&A(_,i[3])},d(i){i&&f(t)}}}function wt(n){let t,e,l,s,r,_,i;function u(a,m){return a[1]?Dt:a[0].length>0?Et:yt}let I=u(n),v=I(n),h=n[3]&&ut(n);return{c(){t=k("div"),e=k("input"),l=F(),v.c(),s=F(),h&&h.c(),r=st(),this.h()},l(a){t=g(a,"DIV",{class:!0,style:!0});var m=C(t);e=g(m,"INPUT",{type:!0,class:!0,style:!0}),m.forEach(f),l=M(a),v.l(a),s=M(a),h&&h.l(a),r=st(),this.h()},h(){D(e,"type","date"),D(e,"class","form-control form-control-sm"),X(e,"max-width","300px"),D(t,"class","d-flex flex-row justify-content-end"),X(t,"margin-bottom","1rem")},m(a,m){P(a,t,m),c(t,e),lt(e,n[4]),P(a,l,m),v.m(a,m),P(a,s,m),h&&h.m(a,m),P(a,r,m),_||(i=[K(e,"input",n[9]),K(e,"change",n[6])],_=!0)},p(a,[m]){m&16&&lt(e,a[4]),I===(I=u(a))&&v?v.p(a,m):(v.d(1),v=I(a),v&&(v.c(),v.m(s.parentNode,s))),a[3]?h?h.p(a,m):(h=ut(a),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null)},i:J,o:J,d(a){a&&(f(t),f(l),f(s),f(r)),v.d(a),h&&h.d(a),_=!1,dt(i)}}}function Tt(n){const t=document.createElement("div");t.textContent=n,t.style.position="fixed",t.style.top="10px",t.style.right="10px",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.padding="10px",t.style.borderRadius="5px",document.body.appendChild(t),setTimeout(()=>{t.style.transition="opacity 1s",t.style.opacity="0",setTimeout(()=>{document.body.removeChild(t)},1e3)},3e3)}function Ht(n,t,e){let l,s;et(n,gt,o=>e(13,l=o)),et(n,rt,o=>e(4,s=o));let r=[],_=!1,i=[],u=!1,I="";function v(o){const y=i.find(d=>d.id===o);return y?y.name:""}async function h(){if(!s)return;e(3,I=""),e(1,_=!0);const[o,y]=await Promise.all([kt(s),It()]);e(0,r=o),i=y,e(1,_=!1)}function a(o){return l.find(d=>d.project_name===o)}function m(){let d=bt().sort((b,V)=>b.start-V.start).map(b=>({description:b.description,mapping:a(v(b.projectId)),start:b.start.toFormat("HH:mm")})).map(b=>{const V=u&&b.description?"'"+b.description.replace(/\t/g," ").replace(/\n/g," "):"",U=b.mapping?(b.mapping.work_type||"").replace(/\t/g," "):"",L=b.mapping?(b.mapping.task_activity||"").replace(/\t/g," "):"";return`${b.start}	${U}	${L}	${V}`}).join(`
`);navigator.clipboard.writeText(d),e(3,I=d),Tt("Exported to clipboard!")}pt(()=>{h()});function O(){s=this.value,rt.set(s)}function N(){u=this.checked,e(2,u)}return[r,_,u,I,s,v,h,a,m,O,N,()=>m()]}class Mt extends mt{constructor(t){super(),ht(this,t,Ht,wt,ft,{})}}export{Mt as component};
